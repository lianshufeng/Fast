<!doctype html><html><head>    <meta charset="utf-8">    <title>Robot Token</title>    <style type="text/css">        .defaultbar {            margin-top: 10px;            height: 5px;            background-color: #FFFFE0;            border: 1px solid #A9C9E2;            position: relative;        }        .defaultbar .jquery-completed {            height: 3px;            background-color: #7d9edb;            top: 1px;            left: 1px;            position: absolute;        }        .defaultbar .jquery-jslider {            height: 15px;            background-color: #E6E6FA;            border: 1px solid #A5B6C8;            top: -6px;            display: block;            cursor: pointer;            position: absolute;        }        .defaultbar .jquery-jslider-hover {            background-color: #000080;        }        fieldset {            border: solid 1px #dedede;            padding: 0 10px;        }        fieldset legend {            background-color: #FFF5FA;            border: 1px solid #F8B3D0;            padding: 5px 10px;        }    </style></head><body><fieldset>    <dl>        <div>            <img id="foo" style="height: 200px;width: 200px"/>        </div>        <div id="slidercontainer1">        </div>        <input id="token" type="hidden"/>    </dl></fieldset></body><script type="text/javascript"        src="https://ayhmfilecenter.oss-cn-hangzhou.aliyuncs.com/captcha/jquery-1.2.6.js"></script><script type="text/javascript"        src="https://ayhmfilecenter.oss-cn-hangzhou.aliyuncs.com/captcha/jquery.jslider.js"></script><script type="text/javascript"        src="https://ayhmfilecenter.oss-cn-hangzhou.aliyuncs.com/captcha/jQueryRotate.js"></script><script type="text/javascript">    $().ready(function () {        //拉取验证图片        getValidateImage();        //绑定进度条事件        bindSliderEvent();    });    /**     * 绑定进度条事件     */    function bindSliderEvent() {        $.fn.jSlider({            renderTo: '#slidercontainer1',            size: {                barWidth: 200,                sliderWidth: 5            },            onChanging: function (percentage) {                var rotate = parseInt(percentage * 360);                $("#foo").rotate(rotate);            }, onChanged: function (percentage) {                var token = $("#token").attr("text");                var code = parseInt(360 - parseInt(percentage * 360));                var time = 1000;                validateCode(token, code, time);            }        });        //初始化进度条        $(".defaultbar .jquery-completed").css("width", 0);        $(".defaultbar .jquery-jslider").css("width", 5).css("left", 0)    }    /**     * 拉取验证图片     */    function getValidateImage() {        $.ajax({            url: "./get",            type: "POST",            dataType: 'json',            data: {"serviceName": "test", "robotType": "Rotation"},            success: function (data) {                data = data.content;                var image = data.image;                var token = data.token;                $("#foo").attr("src", image)                $("#token").attr("text", token)            }        });    }    function validateCode(token, code, time) {        $.ajax({            url: "./validate",            type: "Post",            dataType: 'json',            data: {"token": token, "code": code},            success: function (data) {                //双向验证                if (data.state == 'Success' && data.content.validateType == 'Done' && data.content.serviceName == 'test') {                    alert("验证成功")                } else {                    alert("验证失败")                }            },            complete: function () {                location.reload()            }        });    }</script></html>